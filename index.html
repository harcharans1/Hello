<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HarmonyStream - Offline Music Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --player-height: 80px;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Layout */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo i {
            color: var(--accent);
        }

        .nav-menu {
            display: flex;
            gap: 1.5rem;
        }

        .nav-item {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
            font-weight: 500;
        }

        .nav-item:hover, .nav-item.active {
            background-color: rgba(255, 255, 255, 0.15);
        }

        .user-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-actions button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .user-actions button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .page-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Music Player */
        .music-player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            height: var(--player-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 200;
        }

        .player-album-art {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .player-album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-song-info {
            flex: 1;
            margin-left: 1rem;
        }

        .player-song-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 4px;
        }

        .player-song-artist {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .player-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 2;
        }

        .player-buttons {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 8px;
        }

        .player-button {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--dark);
            cursor: pointer;
            transition: color 0.3s;
        }

        .player-button:hover {
            color: var(--primary);
        }

        .play-button {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .player-progress {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background-color: var(--light-gray);
            border-radius: 2px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress {
            height: 100%;
            background-color: var(--primary);
            width: 30%;
        }

        .player-time {
            font-size: 0.8rem;
            color: var(--gray);
            min-width: 100px;
        }

        .player-volume {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: flex-end;
        }

        .volume-slider {
            width: 100px;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        .card-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--secondary);
        }

        /* Grid Layout */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .song-card {
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }

        .song-image {
            height: 180px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--gray);
        }

        .song-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .song-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .song-artist {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .song-duration {
            font-size: 0.8rem;
            color: var(--gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Playlist Page */
        .playlist-header {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            align-items: center;
        }

        .playlist-cover {
            width: 200px;
            height: 200px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }

        .playlist-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .playlist-info {
            flex: 1;
        }

        .playlist-title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .playlist-meta {
            color: var(--gray);
            margin-bottom: 1rem;
        }

        .playlist-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn {
            padding: 0.7rem 1.5rem;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        /* Table for songs list */
        .songs-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }

        .songs-table th, .songs-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--light-gray);
        }

        .songs-table th {
            background-color: var(--light-gray);
            font-weight: 600;
            color: var(--dark);
        }

        .songs-table tr:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }

        .songs-table .song-number {
            width: 50px;
            text-align: center;
            color: var(--gray);
        }

        .songs-table .song-actions {
            width: 100px;
            text-align: center;
        }

        /* Now Playing Page */
        .now-playing-container {
            display: flex;
            gap: 3rem;
            height: calc(100vh - 200px);
            align-items: center;
        }

        .now-playing-album-art {
            flex: 1;
            max-width: 400px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .now-playing-album-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .now-playing-info {
            flex: 1;
            max-width: 500px;
        }

        .now-playing-title {
            font-size: 3rem;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .now-playing-artist {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 2rem;
        }

        .now-playing-album {
            font-size: 1.2rem;
            color: var(--gray);
            margin-bottom: 2rem;
        }

        .lyrics-container {
            background-color: rgba(67, 97, 238, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 2rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .lyrics-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--secondary);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .now-playing-container {
                flex-direction: column;
                height: auto;
                margin-bottom: 3rem;
            }

            .now-playing-album-art {
                max-width: 300px;
                margin-bottom: 2rem;
            }

            .playlist-header {
                flex-direction: column;
                text-align: center;
            }

            .playlist-cover {
                width: 250px;
                height: 250px;
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }

            .music-player {
                padding: 0 1rem;
                flex-wrap: wrap;
                height: auto;
                padding: 1rem;
            }

            .player-volume {
                display: none;
            }

            .cards-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .songs-table {
                display: block;
                overflow-x: auto;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 1rem;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .player-buttons {
                gap: 1rem;
            }

            .player-song-info {
                min-width: 150px;
            }
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border-left-color: var(--primary);
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--light-gray);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-music"></i>
                <span>HarmonyStream</span>
            </div>
            
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-page="home">Home</a>
                <a href="#" class="nav-item" data-page="library">Library</a>
                <a href="#" class="nav-item" data-page="playlists">Playlists</a>
                <a href="#" class="nav-item" data-page="now-playing">Now Playing</a>
                <a href="#" class="nav-item" data-page="discover">Discover</a>
                <a href="#" class="nav-item" data-page="settings">Settings</a>
            </nav>
            
            <div class="user-actions">
                <button id="upload-btn">
                    <i class="fas fa-upload"></i> Upload
                </button>
                <button id="user-btn">
                    <i class="fas fa-user"></i> Profile
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Home Page -->
            <div id="home-page" class="page active">
                <h1 class="page-title"><i class="fas fa-home"></i> Home</h1>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <h2 class="card-title">Welcome to HarmonyStream</h2>
                    <p>Your personal offline music player. Enjoy your music collection without an internet connection.</p>
                    <p>Currently playing: <span id="current-song-indicator">Nothing playing</span></p>
                </div>
                
                <h2 class="page-title"><i class="fas fa-headphones"></i> Recently Played</h2>
                <div id="recently-played" class="cards-grid">
                    <!-- Recently played songs will be loaded here -->
                </div>
                
                <h2 class="page-title"><i class="fas fa-fire"></i> Most Played</h2>
                <div id="most-played" class="cards-grid">
                    <!-- Most played songs will be loaded here -->
                </div>
            </div>

            <!-- Library Page -->
            <div id="library-page" class="page">
                <h1 class="page-title"><i class="fas fa-music"></i> Music Library</h1>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h2 class="card-title">All Songs</h2>
                        <div>
                            <input type="text" id="search-songs" placeholder="Search songs..." style="padding: 0.5rem 1rem; border-radius: 4px; border: 1px solid var(--light-gray); width: 250px;">
                        </div>
                    </div>
                    <div id="library-stats" style="display: flex; gap: 2rem; margin-top: 1rem;">
                        <div>
                            <h3 style="color: var(--primary); font-size: 1.5rem;" id="total-songs">0</h3>
                            <p>Total Songs</p>
                        </div>
                        <div>
                            <h3 style="color: var(--primary); font-size: 1.5rem;" id="total-artists">0</h3>
                            <p>Artists</p>
                        </div>
                        <div>
                            <h3 style="color: var(--primary); font-size: 1.5rem;" id="total-albums">0</h3>
                            <p>Albums</p>
                        </div>
                        <div>
                            <h3 style="color: var(--primary); font-size: 1.5rem;" id="total-duration">0h 0m</h3>
                            <p>Total Duration</p>
                        </div>
                    </div>
                </div>
                
                <table class="songs-table">
                    <thead>
                        <tr>
                            <th class="song-number">#</th>
                            <th>Title</th>
                            <th>Artist</th>
                            <th>Album</th>
                            <th>Duration</th>
                            <th class="song-actions">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="library-songs">
                        <!-- Songs will be loaded here -->
                    </tbody>
                </table>
            </div>

            <!-- Playlists Page -->
            <div id="playlists-page" class="page">
                <h1 class="page-title"><i class="fas fa-list"></i> Playlists</h1>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h2 class="card-title">Your Playlists</h2>
                        <button class="btn btn-primary" id="create-playlist-btn">
                            <i class="fas fa-plus"></i> Create New Playlist
                        </button>
                    </div>
                </div>
                
                <div id="playlists-container" class="cards-grid">
                    <!-- Playlists will be loaded here -->
                </div>
                
                <div id="playlist-detail" style="display: none;">
                    <!-- Playlist detail will be loaded here -->
                </div>
            </div>

            <!-- Now Playing Page -->
            <div id="now-playing-page" class="page">
                <div id="now-playing-container" class="now-playing-container">
                    <div class="now-playing-album-art">
                        <img id="now-playing-image" src="" alt="Album Art">
                    </div>
                    <div class="now-playing-info">
                        <h1 id="now-playing-title" class="now-playing-title">Song Title</h1>
                        <h2 id="now-playing-artist" class="now-playing-artist">Artist Name</h2>
                        <h3 id="now-playing-album" class="now-playing-album">Album Name</h3>
                        
                        <div class="player-controls" style="max-width: 500px; margin: 2rem 0;">
                            <div class="player-buttons">
                                <button class="player-button"><i class="fas fa-step-backward"></i></button>
                                <button class="player-button play-button" id="now-playing-play">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="player-button"><i class="fas fa-step-forward"></i></button>
                            </div>
                            <div class="player-progress">
                                <span class="player-time" id="now-playing-current">0:00</span>
                                <div class="progress-bar">
                                    <div class="progress" id="now-playing-progress"></div>
                                </div>
                                <span class="player-time" id="now-playing-duration">0:00</span>
                            </div>
                        </div>
                        
                        <div class="playlist-actions">
                            <button class="btn btn-primary">
                                <i class="fas fa-heart"></i> Like
                            </button>
                            <button class="btn btn-outline">
                                <i class="fas fa-list"></i> Add to Playlist
                            </button>
                            <button class="btn btn-outline">
                                <i class="fas fa-share"></i> Share
                            </button>
                        </div>
                        
                        <div class="lyrics-container">
                            <h3 class="lyrics-title">Lyrics</h3>
                            <p id="now-playing-lyrics">Lyrics will appear here when available.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Discover Page -->
            <div id="discover-page" class="page">
                <h1 class="page-title"><i class="fas fa-compass"></i> Discover</h1>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <h2 class="card-title">Genres</h2>
                    <div id="genres-container" style="display: flex; flex-wrap: wrap; gap: 1rem;">
                        <!-- Genres will be loaded here -->
                    </div>
                </div>
                
                <h2 class="page-title"><i class="fas fa-star"></i> Recommended For You</h2>
                <div id="recommended-songs" class="cards-grid">
                    <!-- Recommended songs will be loaded here -->
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings-page" class="page">
                <h1 class="page-title"><i class="fas fa-cog"></i> Settings</h1>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <h2 class="card-title">Audio Settings</h2>
                    
                    <div style="margin-top: 1.5rem;">
                        <div style="margin-bottom: 1.5rem;">
                            <label for="audio-quality" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Audio Quality</label>
                            <select id="audio-quality" style="padding: 0.5rem 1rem; border-radius: 4px; border: 1px solid var(--light-gray); width: 250px;">
                                <option value="high">High (320kbps)</option>
                                <option value="medium" selected>Medium (192kbps)</option>
                                <option value="low">Low (128kbps)</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Crossfade</label>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <input type="range" id="crossfade" min="0" max="10" value="3" style="flex: 1; max-width: 300px;">
                                <span id="crossfade-value">3 seconds</span>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="auto-play" checked>
                                <span>Auto-play next song</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-bottom: 2rem;">
                    <h2 class="card-title">Storage Management</h2>
                    
                    <div style="margin-top: 1.5rem;">
                        <div style="margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>Local Storage Usage</span>
                                <span id="storage-usage">0 MB / 100 MB</span>
                            </div>
                            <div style="height: 10px; background-color: var(--light-gray); border-radius: 5px; overflow: hidden;">
                                <div id="storage-progress" style="height: 100%; background-color: var(--primary); width: 15%;"></div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn btn-outline" id="clear-cache-btn">
                                <i class="fas fa-broom"></i> Clear Cache
                            </button>
                            <button class="btn btn-outline" id="export-data-btn">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                            <button class="btn btn-outline" id="import-data-btn">
                                <i class="fas fa-upload"></i> Import Data
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2 class="card-title">About HarmonyStream</h2>
                    <p style="margin-bottom: 1rem;">Version 2.1.0</p>
                    <p>HarmonyStream is a full-featured offline music player that works completely without an internet connection. All your music is stored locally on your device.</p>
                </div>
            </div>
        </main>

        <!-- Music Player -->
        <div class="music-player">
            <div style="display: flex; align-items: center;">
                <div class="player-album-art">
                    <img id="player-album-art" src="" alt="Album Art">
                </div>
                <div class="player-song-info">
                    <div class="player-song-title" id="player-song-title">No song selected</div>
                    <div class="player-song-artist" id="player-song-artist">Select a song to play</div>
                </div>
            </div>
            
            <div class="player-controls">
                <div class="player-buttons">
                    <button class="player-button" id="prev-btn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="player-button play-button" id="play-pause-btn">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="player-button" id="next-btn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                <div class="player-progress">
                    <span class="player-time" id="current-time">0:00</span>
                    <div class="progress-bar" id="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <span class="player-time" id="duration">0:00</span>
                </div>
            </div>
            
            <div class="player-volume">
                <button class="player-button" id="volume-btn">
                    <i class="fas fa-volume-up"></i>
                </button>
                <input type="range" min="0" max="100" value="80" class="volume-slider" id="volume-slider">
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // React-like state management
        const AppState = {
            currentSong: null,
            isPlaying: false,
            currentTime: 0,
            volume: 80,
            playlist: [],
            currentPlaylistIndex: -1,
            library: [],
            playlists: []
        };

        // Sample data for the music player
        const sampleSongs = [
            {
                id: 1,
                title: "Blinding Lights",
                artist: "The Weeknd",
                album: "After Hours",
                duration: "3:22",
                genre: "Pop",
                plays: 42,
                liked: true,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 2,
                title: "Bohemian Rhapsody",
                artist: "Queen",
                album: "A Night at the Opera",
                duration: "5:55",
                genre: "Rock",
                plays: 38,
                liked: true,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 3,
                title: "Shape of You",
                artist: "Ed Sheeran",
                album: "÷ (Divide)",
                duration: "3:54",
                genre: "Pop",
                plays: 35,
                liked: false,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 4,
                title: "Billie Jean",
                artist: "Michael Jackson",
                album: "Thriller",
                duration: "4:54",
                genre: "Pop",
                plays: 32,
                liked: true,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 5,
                title: "Hotel California",
                artist: "Eagles",
                album: "Hotel California",
                duration: "6:30",
                genre: "Rock",
                plays: 28,
                liked: false,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 6,
                title: "Smells Like Teen Spirit",
                artist: "Nirvana",
                album: "Nevermind",
                duration: "5:01",
                genre: "Rock",
                plays: 25,
                liked: true,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 7,
                title: "Uptown Funk",
                artist: "Mark Ronson ft. Bruno Mars",
                album: "Uptown Special",
                duration: "4:30",
                genre: "Funk",
                plays: 22,
                liked: false,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 8,
                title: "Rolling in the Deep",
                artist: "Adele",
                album: "21",
                duration: "3:48",
                genre: "Pop",
                plays: 20,
                liked: true,
                cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            }
        ];

        const samplePlaylists = [
            {
                id: 1,
                name: "Favorites",
                description: "My favorite tracks",
                songCount: 12,
                cover: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 2,
                name: "Workout Mix",
                description: "High energy tracks for workouts",
                songCount: 18,
                cover: "https://images.unsplash.com/photo-1518611012118-696072aa579a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 3,
                name: "Chill Vibes",
                description: "Relaxing music for unwinding",
                songCount: 15,
                cover: "https://images.unsplash.com/photo-1508700115892-45ecd05ae2ad?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            },
            {
                id: 4,
                name: "Road Trip",
                description: "Perfect for long drives",
                songCount: 22,
                cover: "https://images.unsplash.com/photo-1484704849700-f032a568e944?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
            }
        ];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial state
            AppState.library = [...sampleSongs];
            AppState.playlists = [...samplePlaylists];
            
            // Initialize UI
            initNavigation();
            renderHomePage();
            renderLibraryPage();
            renderPlaylistsPage();
            renderDiscoverPage();
            initMusicPlayer();
            initSettingsPage();
            
            // Set current song as first song
            if (AppState.library.length > 0) {
                AppState.currentSong = AppState.library[0];
                updatePlayerDisplay();
            }
            
            // Update storage display
            updateStorageDisplay();
        });

        // Navigation between pages
        function initNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const pages = document.querySelectorAll('.page');
            
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all nav items
                    navItems.forEach(nav => nav.classList.remove('active'));
                    
                    // Add active class to clicked nav item
                    this.classList.add('active');
                    
                    // Get page id from data attribute
                    const pageId = this.getAttribute('data-page');
                    
                    // Hide all pages
                    pages.forEach(page => {
                        page.classList.remove('active');
                    });
                    
                    // Show selected page
                    document.getElementById(`${pageId}-page`).classList.add('active');
                    
                    // Update page-specific content
                    if (pageId === 'home') {
                        renderHomePage();
                    } else if (pageId === 'library') {
                        renderLibraryPage();
                    } else if (pageId === 'playlists') {
                        renderPlaylistsPage();
                    } else if (pageId === 'now-playing') {
                        renderNowPlayingPage();
                    } else if (pageId === 'discover') {
                        renderDiscoverPage();
                    }
                });
            });
            
            // Upload button
            document.getElementById('upload-btn').addEventListener('click', function() {
                alert('In a real application, this would open a file upload dialog to add music files to your library.');
            });
            
            // User button
            document.getElementById('user-btn').addEventListener('click', function() {
                alert('User profile menu would open here.');
            });
        }

        // Render Home Page
        function renderHomePage() {
            // Update current song indicator
            if (AppState.currentSong) {
                document.getElementById('current-song-indicator').textContent = 
                    `${AppState.currentSong.title} by ${AppState.currentSong.artist}`;
            }
            
            // Render recently played (top 4 most played)
            const recentlyPlayedContainer = document.getElementById('recently-played');
            const recentlyPlayed = [...AppState.library]
                .sort((a, b) => b.plays - a.plays)
                .slice(0, 4);
            
            recentlyPlayedContainer.innerHTML = recentlyPlayed.map(song => `
                <div class="card song-card" data-song-id="${song.id}">
                    <div class="song-image">
                        <img src="${song.cover}" alt="${song.album}">
                    </div>
                    <div class="song-title">${song.title}</div>
                    <div class="song-artist">${song.artist}</div>
                    <div class="song-duration">
                        <span>${song.duration}</span>
                        <span><i class="fas fa-play"></i> ${song.plays}</span>
                    </div>
                </div>
            `).join('');
            
            // Add click event to play songs
            recentlyPlayedContainer.querySelectorAll('.song-card').forEach(card => {
                card.addEventListener('click', function() {
                    const songId = parseInt(this.getAttribute('data-song-id'));
                    const song = AppState.library.find(s => s.id === songId);
                    if (song) {
                        playSong(song);
                    }
                });
            });
            
            // Render most played (top 4)
            const mostPlayedContainer = document.getElementById('most-played');
            const mostPlayed = [...AppState.library]
                .sort((a, b) => b.plays - a.plays)
                .slice(0, 4);
            
            mostPlayedContainer.innerHTML = mostPlayed.map(song => `
                <div class="card song-card" data-song-id="${song.id}">
                    <div class="song-image">
                        <img src="${song.cover}" alt="${song.album}">
                    </div>
                    <div class="song-title">${song.title}</div>
                    <div class="song-artist">${song.artist}</div>
                    <div class="song-duration">
                        <span>${song.duration}</span>
                        <span><i class="fas fa-play"></i> ${song.plays}</span>
                    </div>
                </div>
            `).join('');
            
            // Add click event to play songs
            mostPlayedContainer.querySelectorAll('.song-card').forEach(card => {
                card.addEventListener('click', function() {
                    const songId = parseInt(this.getAttribute('data-song-id'));
                    const song = AppState.library.find(s => s.id === songId);
                    if (song) {
                        playSong(song);
                    }
                });
            });
        }

        // Render Library Page
        function renderLibraryPage() {
            // Update library stats
            document.getElementById('total-songs').textContent = AppState.library.length;
            
            const artists = [...new Set(AppState.library.map(song => song.artist))];
            document.getElementById('total-artists').textContent = artists.length;
            
            const albums = [...new Set(AppState.library.map(song => song.album))];
            document.getElementById('total-albums').textContent = albums.length;
            
            // Calculate total duration (simplified)
            let totalMinutes = 0;
            AppState.library.forEach(song => {
                const timeParts = song.duration.split(':');
                totalMinutes += parseInt(timeParts[0]) * 60 + parseInt(timeParts[1]);
            });
            
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            document.getElementById('total-duration').textContent = `${hours}h ${minutes}m`;
            
            // Render songs table
            const librarySongsContainer = document.getElementById('library-songs');
            librarySongsContainer.innerHTML = AppState.library.map((song, index) => `
                <tr>
                    <td class="song-number">${index + 1}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="width: 40px; height: 40px; border-radius: 4px; overflow: hidden;">
                                <img src="${song.cover}" alt="${song.album}" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <span>${song.title}</span>
                        </div>
                    </td>
                    <td>${song.artist}</td>
                    <td>${song.album}</td>
                    <td>${song.duration}</td>
                    <td class="song-actions">
                        <button class="player-button play-song-btn" data-song-id="${song.id}" title="Play">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="player-button" title="Add to playlist">
                            <i class="fas fa-plus"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            
            // Add play button events
            librarySongsContainer.querySelectorAll('.play-song-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const songId = parseInt(this.getAttribute('data-song-id'));
                    const song = AppState.library.find(s => s.id === songId);
                    if (song) {
                        playSong(song);
                    }
                });
            });
            
            // Add row click events
            librarySongsContainer.querySelectorAll('tr').forEach(row => {
                row.addEventListener('click', function() {
                    const songId = parseInt(this.querySelector('.play-song-btn').getAttribute('data-song-id'));
                    const song = AppState.library.find(s => s.id === songId);
                    if (song) {
                        // Switch to now playing page
                        document.querySelector('.nav-item[data-page="now-playing"]').click();
                        renderNowPlayingPage(song);
                    }
                });
            });
            
            // Search functionality
            document.getElementById('search-songs').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const rows = librarySongsContainer.querySelectorAll('tr');
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        }

        // Render Playlists Page
        function renderPlaylistsPage() {
            const playlistsContainer = document.getElementById('playlists-container');
            playlistsContainer.innerHTML = AppState.playlists.map(playlist => `
                <div class="card song-card" data-playlist-id="${playlist.id}">
                    <div class="song-image">
                        <img src="${playlist.cover}" alt="${playlist.name}">
                    </div>
                    <div class="song-title">${playlist.name}</div>
                    <div class="song-artist">${playlist.description}</div>
                    <div class="song-duration">
                        <span>${playlist.songCount} songs</span>
                        <span><i class="fas fa-play"></i></span>
                    </div>
                </div>
            `).join('');
            
            // Add click event to view playlist details
            playlistsContainer.querySelectorAll('.song-card').forEach(card => {
                card.addEventListener('click', function() {
                    const playlistId = parseInt(this.getAttribute('data-playlist-id'));
                    showPlaylistDetail(playlistId);
                });
            });
            
            // Create playlist button
            document.getElementById('create-playlist-btn').addEventListener('click', function() {
                const playlistName = prompt('Enter playlist name:');
                if (playlistName) {
                    const newPlaylist = {
                        id: AppState.playlists.length + 1,
                        name: playlistName,
                        description: "New playlist",
                        songCount: 0,
                        cover: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                        songs: []
                    };
                    
                    AppState.playlists.push(newPlaylist);
                    renderPlaylistsPage();
                    alert(`Playlist "${playlistName}" created!`);
                }
            });
        }

        // Show playlist detail
        function showPlaylistDetail(playlistId) {
            const playlist = AppState.playlists.find(p => p.id === playlistId);
            if (!playlist) return;
            
            const playlistDetailContainer = document.getElementById('playlist-detail');
            const playlistsContainer = document.getElementById('playlists-container');
            
            // Hide playlist grid, show detail
            playlistsContainer.style.display = 'none';
            playlistDetailContainer.style.display = 'block';
            
            playlistDetailContainer.innerHTML = `
                <div class="playlist-header">
                    <div class="playlist-cover">
                        <img src="${playlist.cover}" alt="${playlist.name}">
                    </div>
                    <div class="playlist-info">
                        <h1 class="playlist-title">${playlist.name}</h1>
                        <p class="playlist-meta">${playlist.description} • ${playlist.songCount} songs</p>
                        <p>Created by you • Updated today</p>
                        <div class="playlist-actions">
                            <button class="btn btn-primary" id="play-playlist-btn">
                                <i class="fas fa-play"></i> Play
                            </button>
                            <button class="btn btn-outline" id="shuffle-playlist-btn">
                                <i class="fas fa-random"></i> Shuffle
                            </button>
                            <button class="btn btn-outline" id="edit-playlist-btn">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-outline" id="back-to-playlists-btn">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                        </div>
                    </div>
                </div>
                <h2 class="page-title">Songs</h2>
                <div class="empty-state">
                    <i class="fas fa-music"></i>
                    <p>No songs in this playlist yet. Add some songs from your library!</p>
                    <button class="btn btn-primary" style="margin-top: 1rem;">
                        <i class="fas fa-plus"></i> Add Songs
                    </button>
                </div>
            `;
            
            // Back button
            document.getElementById('back-to-playlists-btn').addEventListener('click', function() {
                playlistDetailContainer.style.display = 'none';
                playlistsContainer.style.display = 'grid';
            });
            
            // Play playlist button
            document.getElementById('play-playlist-btn').addEventListener('click', function() {
                // In a real app, this would play the playlist
                alert(`Playing playlist: ${playlist.name}`);
            });
        }

        // Render Now Playing Page
        function renderNowPlayingPage(song = null) {
            const displaySong = song || AppState.currentSong;
            if (!displaySong) return;
            
            document.getElementById('now-playing-title').textContent = displaySong.title;
            document.getElementById('now-playing-artist').textContent = displaySong.artist;
            document.getElementById('now-playing-album').textContent = displaySong.album;
            document.getElementById('now-playing-image').src = displaySong.cover;
            
            // Update play button
            const playButton = document.getElementById('now-playing-play');
            if (AppState.isPlaying && AppState.currentSong && AppState.currentSong.id === displaySong.id) {
                playButton.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                playButton.innerHTML = '<i class="fas fa-play"></i>';
            }
            
            // Play button event
            playButton.addEventListener('click', function() {
                if (AppState.isPlaying && AppState.currentSong && AppState.currentSong.id === displaySong.id) {
                    pauseSong();
                } else {
                    playSong(displaySong);
                }
            });
            
            // Format duration for display
            const durationParts = displaySong.duration.split(':');
            const minutes = parseInt(durationParts[0]);
            const seconds = parseInt(durationParts[1]);
            document.getElementById('now-playing-duration').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Set up progress update
            if (AppState.currentSong && AppState.currentSong.id === displaySong.id) {
                updateNowPlayingProgress();
            } else {
                document.getElementById('now-playing-current').textContent = '0:00';
                document.getElementById('now-playing-progress').style.width = '0%';
            }
        }

        // Render Discover Page
        function renderDiscoverPage() {
            // Render genres
            const genres = [...new Set(AppState.library.map(song => song.genre))];
            const genresContainer = document.getElementById('genres-container');
            
            genresContainer.innerHTML = genres.map(genre => `
                <div class="card" style="padding: 1rem; cursor: pointer; min-width: 150px;">
                    <h3 style="margin-bottom: 0.5rem; color: var(--primary);">${genre}</h3>
                    <p style="color: var(--gray); font-size: 0.9rem;">
                        ${AppState.library.filter(song => song.genre === genre).length} songs
                    </p>
                </div>
            `).join('');
            
            // Render recommended songs (shuffle the library)
            const recommendedSongsContainer = document.getElementById('recommended-songs');
            const shuffled = [...AppState.library].sort(() => 0.5 - Math.random()).slice(0, 6);
            
            recommendedSongsContainer.innerHTML = shuffled.map(song => `
                <div class="card song-card" data-song-id="${song.id}">
                    <div class="song-image">
                        <img src="${song.cover}" alt="${song.album}">
                    </div>
                    <div class="song-title">${song.title}</div>
                    <div class="song-artist">${song.artist}</div>
                    <div class="song-duration">
                        <span>${song.duration}</span>
                        <span>${song.genre}</span>
                    </div>
                </div>
            `).join('');
            
            // Add click event to play songs
            recommendedSongsContainer.querySelectorAll('.song-card').forEach(card => {
                card.addEventListener('click', function() {
                    const songId = parseInt(this.getAttribute('data-song-id'));
                    const song = AppState.library.find(s => s.id === songId);
                    if (song) {
                        playSong(song);
                    }
                });
            });
        }

        // Initialize Music Player
        function initMusicPlayer() {
            // Play/Pause button
            document.getElementById('play-pause-btn').addEventListener('click', function() {
                if (AppState.currentSong) {
                    if (AppState.isPlaying) {
                        pauseSong();
                    } else {
                        playSong(AppState.currentSong);
                    }
                } else if (AppState.library.length > 0) {
                    // If no song is selected, play the first one
                    playSong(AppState.library[0]);
                }
            });
            
            // Previous button
            document.getElementById('prev-btn').addEventListener('click', function() {
                playPreviousSong();
            });
            
            // Next button
            document.getElementById('next-btn').addEventListener('click', function() {
                playNextSong();
            });
            
            // Volume slider
            const volumeSlider = document.getElementById('volume-slider');
            volumeSlider.addEventListener('input', function() {
                AppState.volume = parseInt(this.value);
                updateVolumeIcon();
                // In a real app, this would adjust the audio volume
            });
            
            // Volume button (mute/unmute)
            document.getElementById('volume-btn').addEventListener('click', function() {
                if (AppState.volume > 0) {
                    AppState.lastVolume = AppState.volume;
                    AppState.volume = 0;
                    volumeSlider.value = 0;
                } else {
                    AppState.volume = AppState.lastVolume || 80;
                    volumeSlider.value = AppState.volume;
                }
                updateVolumeIcon();
            });
            
            // Progress bar click
            document.getElementById('progress-bar').addEventListener('click', function(e) {
                if (!AppState.currentSong) return;
                
                const rect = this.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                
                // Update progress display
                const durationParts = AppState.currentSong.duration.split(':');
                const totalSeconds = parseInt(durationParts[0]) * 60 + parseInt(durationParts[1]);
                const newTime = totalSeconds * percent;
                
                AppState.currentTime = newTime;
                updateProgressDisplay();
                
                // In a real app, this would seek the audio to the new time
            });
            
            // Simulate playback progress (for demo purposes)
            setInterval(() => {
                if (AppState.isPlaying && AppState.currentSong) {
                    const durationParts = AppState.currentSong.duration.split(':');
                    const totalSeconds = parseInt(durationParts[0]) * 60 + parseInt(durationParts[1]);
                    
                    // Increment current time
                    AppState.currentTime += 1;
                    
                    // If we reached the end, play next song
                    if (AppState.currentTime >= totalSeconds) {
                        playNextSong();
                    } else {
                        updateProgressDisplay();
                        updateNowPlayingProgress();
                    }
                }
            }, 1000);
        }

        // Initialize Settings Page
        function initSettingsPage() {
            // Crossfade slider
            const crossfadeSlider = document.getElementById('crossfade');
            const crossfadeValue = document.getElementById('crossfade-value');
            
            crossfadeSlider.addEventListener('input', function() {
                crossfadeValue.textContent = `${this.value} seconds`;
            });
            
            // Clear cache button
            document.getElementById('clear-cache-btn').addEventListener('click', function() {
                if (confirm('Are you sure you want to clear the cache? This will not delete your music files.')) {
                    alert('Cache cleared successfully!');
                    updateStorageDisplay();
                }
            });
            
            // Export data button
            document.getElementById('export-data-btn').addEventListener('click', function() {
                alert('In a real application, this would export your playlists and settings as a file.');
            });
            
            // Import data button
            document.getElementById('import-data-btn').addEventListener('click', function() {
                alert('In a real application, this would import playlists and settings from a file.');
            });
        }

        // Update storage display
        function updateStorageDisplay() {
            // Calculate simulated storage usage
            const used = Math.floor(Math.random() * 70) + 10; // 10-80 MB
            const total = 100;
            const percent = (used / total) * 100;
            
            document.getElementById('storage-usage').textContent = `${used} MB / ${total} MB`;
            document.getElementById('storage-progress').style.width = `${percent}%`;
        }

        // Play a song
        function playSong(song) {
            // Update state
            AppState.currentSong = song;
            AppState.isPlaying = true;
            
            // Increment play count for demo
            song.plays = (song.plays || 0) + 1;
            
            // Update player display
            updatePlayerDisplay();
            
            // Update home page if needed
            if (document.getElementById('home-page').classList.contains('active')) {
                renderHomePage();
            }
            
            // Update now playing page if active
            if (document.getElementById('now-playing-page').classList.contains('active')) {
                renderNowPlayingPage(song);
            }
        }

        // Pause current song
        function pauseSong() {
            AppState.isPlaying = false;
            updatePlayerDisplay();
            
            // Update now playing page if active
            if (document.getElementById('now-playing-page').classList.contains('active')) {
                const playButton = document.getElementById('now-playing-play');
                playButton.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        // Play next song
        function playNextSong() {
            if (AppState.library.length === 0) return;
            
            let currentIndex = AppState.library.findIndex(song => song.id === AppState.currentSong.id);
            let nextIndex = (currentIndex + 1) % AppState.library.length;
            
            playSong(AppState.library[nextIndex]);
        }

        // Play previous song
        function playPreviousSong() {
            if (AppState.library.length === 0) return;
            
            let currentIndex = AppState.library.findIndex(song => song.id === AppState.currentSong.id);
            let prevIndex = currentIndex - 1;
            if (prevIndex < 0) prevIndex = AppState.library.length - 1;
            
            playSong(AppState.library[prevIndex]);
        }

        // Update player display
        function updatePlayerDisplay() {
            const playPauseBtn = document.getElementById('play-pause-btn');
            
            if (AppState.currentSong) {
                // Update player info
                document.getElementById('player-song-title').textContent = AppState.currentSong.title;
                document.getElementById('player-song-artist').textContent = AppState.currentSong.artist;
                document.getElementById('player-album-art').src = AppState.currentSong.cover;
                
                // Update play/pause button
                if (AppState.isPlaying) {
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
                
                // Reset and start progress
                AppState.currentTime = 0;
                updateProgressDisplay();
            } else {
                document.getElementById('player-song-title').textContent = 'No song selected';
                document.getElementById('player-song-artist').textContent = 'Select a song to play';
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        // Update progress display
        function updateProgressDisplay() {
            if (!AppState.currentSong) return;
            
            // Format current time
            const currentMinutes = Math.floor(AppState.currentTime / 60);
            const currentSeconds = Math.floor(AppState.currentTime % 60);
            document.getElementById('current-time').textContent = 
                `${currentMinutes}:${currentSeconds.toString().padStart(2, '0')}`;
            
            // Format duration
            const durationParts = AppState.currentSong.duration.split(':');
            const totalSeconds = parseInt(durationParts[0]) * 60 + parseInt(durationParts[1]);
            document.getElementById('duration').textContent = AppState.currentSong.duration;
            
            // Update progress bar
            const progressPercent = (AppState.currentTime / totalSeconds) * 100;
            document.getElementById('progress').style.width = `${progressPercent}%`;
        }

        // Update now playing progress
        function updateNowPlayingProgress() {
            if (!AppState.currentSong) return;
            
            // Format current time
            const currentMinutes = Math.floor(AppState.currentTime / 60);
            const currentSeconds = Math.floor(AppState.currentTime % 60);
            document.getElementById('now-playing-current').textContent = 
                `${currentMinutes}:${currentSeconds.toString().padStart(2, '0')}`;
            
            // Update progress bar
            const durationParts = AppState.currentSong.duration.split(':');
            const totalSeconds = parseInt(durationParts[0]) * 60 + parseInt(durationParts[1]);
            const progressPercent = (AppState.currentTime / totalSeconds) * 100;
            document.getElementById('now-playing-progress').style.width = `${progressPercent}%`;
        }

        // Update volume icon
        function updateVolumeIcon() {
            const volumeBtn = document.getElementById('volume-btn');
            const icon = volumeBtn.querySelector('i');
            
            if (AppState.volume === 0) {
                icon.className = 'fas fa-volume-mute';
            } else if (AppState.volume < 50) {
                icon.className = 'fas fa-volume-down';
            } else {
                icon.className = 'fas fa-volume-up';
            }
        }

        // Simulate Node.js backend API (for demo purposes)
        const MockBackendAPI = {
            getSongs: () => {
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve(sampleSongs);
                    }, 300);
                });
            },
            
            getPlaylists: () => {
                return new Promise(resolve => {
                    setTimeout(() => {
                        resolve(samplePlaylists);
                    }, 300);
                });
            },
            
            uploadSong: (file) => {
                return new Promise(resolve => {
                    setTimeout(() => {
                        const newSong = {
                            id: sampleSongs.length + 1,
                            title: file.name.replace(/\.[^/.]+$/, ""),
                            artist: "Unknown Artist",
                            album: "Unknown Album",
                            duration: "3:45",
                            genre: "Unknown",
                            plays: 0,
                            liked: false,
                            cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"
                        };
                        resolve(newSong);
                    }, 500);
                });
            }
        };
    </script>
</body>
</html>